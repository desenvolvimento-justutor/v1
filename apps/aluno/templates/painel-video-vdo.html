{% extends '_base-painel-aluno.html' %}
{% load thumbnail %}

{% block panel_content %}
    <div class="main-box clearfix">
        <header class="main-box-header clearfix">
            <h2>{{ video }}</h2>
            <div class="icon-box pull-left">
                <a href="javascript:history.back()" class="btn">
                    <i class="fa fa-chevron-left"></i> Voltar
                </a>
            </div>
        </header>

        <div class="main-box-body clearfix">
            <div class="video-js-responsive-container vjs-hd">
                <iframe src="https://player.vdocipher.com/v2/?otp={{ otp }}&playbackInfo={{ playbackInfo }}"
                        style="border:0;height:360px;width:640px;max-width:100%" allowFullScreen="true"
                        allow="encrypted-media"></iframe>
            </div>
        </div>
    </div>
{% endblock %}
{% block js %}
    <!--
    <script>
        $(document).ready(function () {
            (function (v, i, d, e, o) {
                v[o] = v[o] || {
                    add: function V(a) {
                        (v[o].d = v[o].d || []).push(a);
                    }
                };
                if (!v[o].l) {
                    v[o].l = 1 * new Date();
                    a = i.createElement(d);
                    m = i.getElementsByTagName(d)[0];
                    a.async = 1;
                    a.src = e;
                    m.parentNode.insertBefore(a, m);
                }
            })(
                window,
                document,
                "script",
                "https://cdn-gce.vdocipher.com/playerAssets/1.6.10/vdo.js",
                "vdo"
            );
            vdo.add({
                otp: "{{ otp }}",
                playbackInfo: btoa(
                    JSON.stringify({
                        videoId: "{{ videoID }}"
                    })
                ),
                theme: "9ae8bbe8dd964ddc9bdb932cca1cb59a",
                container: document.querySelector("#embedBox")
            });
        });
    </script>
    <script>
      var htmlStr =
        '<p class="cta" mpml-show="currentTime | inrange \'10-20\'"><button>Buy now</button></p>';
      function onVdoCipherAPIReady() {
        // api is ready to use

        // get reference to player
        var v = vdo.getObjects()[0];
        v.addEventListener("mpmlLoad", () => {
          v.injectThemeHtml(htmlStr);
        });
      }
    </script>
    -->
{% endblock %}